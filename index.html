<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Developer Divas - Global Chat</title>
<script src="https://cdn.tailwindcss.com"></script>
<!-- Google Fonts for fun girly vibe -->
<link href="https://fonts.googleapis.com/css2?family=Pacifico&family=Inter:wght@400;600;700&display=swap" rel="stylesheet">
<style>
    body {
        font-family: 'Inter', sans-serif;
        background: linear-gradient(135deg, #fce4ec, #fff0f5);
        min-height: 100vh;
    }

    h1, h2 {
        font-family: 'Pacifico', cursive;
    }

    /* Chat bubbles */
    .message-bubble.self {
        background: linear-gradient(135deg, #f48fb1, #f06292);
        color: white;
        border-bottom-right-radius: 0;
        margin-left: auto;
    }
    .message-bubble.other {
        background: linear-gradient(135deg, #ffc1e3, #ffb6c1);
        color: #4c4c4c;
        border-bottom-left-radius: 0;
    }
    .message-bubble {
        max-width: 80%;
        padding: 10px 14px;
        border-radius: 20px;
        margin-bottom: 10px;
        box-shadow: 0 4px 12px rgba(0,0,0,0.1);
        transition: transform 0.2s ease;
    }
    .message-bubble:hover {
        transform: scale(1.02);
    }

    /* Scrollbar for chat */
    #chat-messages::-webkit-scrollbar {
        width: 6px;
    }
    #chat-messages::-webkit-scrollbar-thumb {
        background-color: #f48fb1;
        border-radius: 3px;
    }

    /* Video styling */
    #video-container {
        height: 25vh;
        min-height: 150px;
        display: flex;
        gap: 8px;
        padding: 4px;
    }
    #local-video, .remote-video {
        width: 100%;
        height: 100%;
        object-fit: cover;
        border-radius: 12px;
        border: 3px solid #e91e63;
        box-shadow: 0 4px 10px rgba(0,0,0,0.2);
        transition: transform 0.2s ease;
    }
    #local-video:hover, .remote-video:hover {
        transform: scale(1.03);
    }

    /* Inputs and buttons */
    input[type=text] {
        border: 2px solid #f48fb1;
        border-radius: 9999px;
        padding: 10px 14px;
        outline: none;
        transition: all 0.2s ease;
    }
    input[type=text]:focus {
        ring: 2px;
        ring-color: #f06292;
        border-color: #f06292;
    }

    button {
        font-weight: bold;
        transition: all 0.2s ease;
    }
    button:hover {
        transform: scale(1.05);
    }

    /* Status Message */
    #status-message {
        font-family: 'Pacifico', cursive;
        z-index: 50;
    }

    /* Cute hover effects for file upload */
    #file-upload-input + span {
        color: #f06292;
        font-weight: 500;
    }

</style>
</head>
<body class="flex flex-col h-screen">

<!-- Global Status Message -->
<div id="status-message" class="hidden fixed top-2 left-1/2 transform -translate-x-1/2 text-center px-4 py-2 rounded-full bg-pink-200 text-pink-800 shadow-md"></div>

<!-- LOGIN SCREEN -->
<div id="login-screen" class="screen flex flex-col items-center justify-center h-full p-6 text-center">
    <h1 class="text-5xl text-fuchsia-600 mb-4">üíñ Developer Divas üíñ</h1>
    <p class="text-pink-500 mb-8 text-lg">Exclusive chat for our fabulous divas ‚ú®</p>
    
    <button onclick="handleGoogleSignIn()" class="bg-gradient-to-r from-pink-400 to-fuchsia-500 text-white py-3 px-6 rounded-full shadow-lg flex items-center space-x-2 hover:scale-105">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" fill="currentColor"><path d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zM11.5 17.5H9V12h2.5v5.5z"/></svg>
        <span>Login with Gmail</span>
    </button>
    <p class="text-xs text-gray-400 mt-4">Only the 3 whitelisted Gmail accounts are permitted.</p>
</div>

<!-- CHAT SCREEN -->
<div id="chat-screen" class="screen hidden flex flex-col h-full">

    <!-- Header -->
    <header class="p-4 bg-gradient-to-r from-pink-400 to-fuchsia-500 shadow-md flex justify-between items-center">
        <h2 id="chat-header-title" class="text-xl text-white font-bold">Developer Divas</h2>
        <div class="flex items-center space-x-2">
            <span id="user-info" class="text-sm text-pink-100 hidden sm:inline"></span>
            <button onclick="signOut(auth)" class="text-white hover:text-pink-200">
                <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" fill="currentColor" class="w-6 h-6">
                    <path fill-rule="evenodd" d="M3 4.25A2.25 2.25 0 0 1 5.25 2h5.5A2.25 2.25 0 0 1 13 4.25v2a.75.75 0 0 0 1.5 0v-2A3.75 3.75 0 0 0 10.75.5h-5.5A3.75 3.75 0 0 0 1.5 4.25v11.5A3.75 3.75 0 0 0 5.25 19h5.5A3.75 3.75 0 0 0 14.5 15.25v-2a.75.75 0 0 0-1.5 0v2c0 .69-.56 1.25-1.25 1.25h-5.5c-.69 0-1.25-.56-1.25-1.25V4.25Z" clip-rule="evenodd" />
                    <path fill-rule="evenodd" d="M15.75 12.5a.75.75 0 0 0-1.5 0v-5a.75.75 0 0 0 1.5 0v5Z" clip-rule="evenodd" />
                </svg>
            </button>
        </div>
    </header>

    <!-- Video -->
    <div id="video-container" class="flex-shrink-0 bg-pink-50 rounded-lg p-2 shadow-inner">
        <video id="local-video" class="flex-1" autoplay muted playsinline></video>
        <!-- remote videos appended here -->
    </div>

    <!-- Call Controls -->
    <div id="call-controls" class="p-2 flex justify-center space-x-4 hidden bg-pink-100 shadow-inner rounded-lg">
        <button id="end-call-button" onclick="endCall()" class="bg-red-500 hover:bg-red-700 text-white py-2 px-4 rounded-full flex items-center space-x-1">
            <span>End Call ‚ùå</span>
        </button>
    </div>
    <div class="p-2 flex justify-center bg-pink-100 shadow-inner rounded-lg">
        <button id="start-call-button" onclick="startCall()" class="bg-pink-500 hover:bg-pink-700 text-white py-2 px-4 rounded-full flex items-center space-x-1">
            <span>Start Video Call üé•</span>
        </button>
    </div>

    <!-- Messages -->
    <div id="chat-messages" class="flex-1 p-4 flex flex-col space-y-2 overflow-y-auto bg-pink-50 rounded-lg">
        <p class="text-center text-gray-500 text-sm mt-4">Chat history loading...</p>
    </div>

    <!-- Input Footer -->
    <footer class="p-3 bg-white border-t border-pink-200 flex flex-col space-y-2">
        <div class="flex items-center space-x-2">
            <label for="file-upload-input" class="cursor-pointer p-2 rounded-full bg-pink-200 hover:bg-pink-300 text-pink-700">
                üìé
            </label>
            <input type="file" id="file-upload-input" class="hidden" onchange="handleFileAttachmentChange(event)">
            <span id="file-name-display" class="text-xs text-pink-500 truncate flex-1">No file attached.</span>
        </div>
        <div class="flex items-center space-x-2">
            <input type="text" id="chat-input" placeholder="Type your message..." onkeyup="if(event.key==='Enter') handleSendClick()">
            <button id="send-button" onclick="handleSendClick()" class="bg-fuchsia-500 hover:bg-fuchsia-600 text-white p-3 rounded-full shadow-lg">‚û°Ô∏è</button>
        </div>
    </footer>

</div>

<!-- Firebase scripts remain untouched -->
<script type="module">
  // your existing firebase + chat + webrtc code here...
</script>

</body>
</html>
